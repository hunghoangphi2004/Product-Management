extends ../../layouts/default.pug
include ../../mixins/table-tree.pug
include ../../mixins/moment.pug
include ../../mixins/form-change-multi.pug

block main 
  if(role.permissions.includes("products-category_view"))
    h1 Trang danh mục

    .card.mb-3
      .card-header Bộ lọc và Tìm kiếm
      .card-body
        .row
          .col-6
            include ../../mixins/filter-status.pug
            +filter-status(filterStatus)
          .col-6 
            include ../../mixins/search.pug
            +search(keyword)
    .card.mb-3
    .card-header Sắp xếp
    .card-body
      .row
        .col-4
          include ../../mixins/sort.pug
          +sort()


    .card.mb-3
      .card-header Danh sách danh mục
        .card-body
          .row
            .col-8
              if(role.permissions.includes("products-category_edit"))
                +form-change-multi(`${prefixAdmin}/products-category/change-multi?_method=PATCH`)
            .col-4
              if(role.permissions.includes("products-category_create"))
                a(href=`${prefixAdmin}/products-category/create` class="btn btn-outline-success") + Thêm mới
          
          table(
            class="table table-hover table-sm" checkbox-multi
          )
            thead 
              tr 
                th
                  input(type="checkbox" name="checkAll")
                th STT 
                th Hình ảnh 
                th Tiêu đề
                th Vị trí
                th Trạng thái
                th Người tạo
                th Người cập nhật
                th Hành động
            tbody 
            +table-tree(records)
    include ../../mixins/pagination.pug
    //- +pagination(pagination)

    form(
      action=``
      method="POST"
      id = "formChangeStatus"
      data-path = `${prefixAdmin}/products-category/change-status`
    )

    form(
      action=``
      method="POST"
      id = "formDeleteItem"
      data-path = `${prefixAdmin}/products-category/delete`
    )
  else
    h1 Không có quyền truy cập
  
  script(src="/admin/js/product-category.js")
